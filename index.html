<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>하늘에서 '사례관리론'이 비처럼 내리면 </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      height: 100vh;
      overflow: hidden;
      font-family: "Noto Sans KR", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      color: #111827;
      background: radial-gradient(circle at top, #1e293b, #020617 55%);
      position: relative;
    }

    .sky {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }

    /* 상단 타이틀 */
    .header {
      position: absolute;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      color: #e5e7eb;
      z-index: 20;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
      padding: 6px 14px;
      border-radius: 999px;
      backdrop-filter: blur(10px);
      background: linear-gradient(
        120deg,
        rgba(15,23,42,0.9),
        rgba(30,64,175,0.7)
      );
      border: 1px solid rgba(148,163,184,0.6);
    }

    .header-title {
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.06em;
    }

    .header-sub {
      margin-top: 4px;
      font-size: 0.72rem;
      opacity: 0.8;
    }

    /* 말풍선 공통 스타일 (색은 CSS 변수로 카테고리별 지정) */
    .bubble {
      position: fixed;
      top: -80px;
      max-width: 280px;
      padding: 12px 18px;
      border-radius: 999px;
      background: var(--bubble-bg, rgba(248, 250, 252, 0.95));
      color: #111827;
      font-size: 0.9rem;
      line-height: 1.5;
      font-weight: 500;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3);
      border: 1.5px solid rgba(226, 232, 240, 0.95);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: pointer;
      animation-name: fall;
      animation-timing-function: ease-in-out;
      animation-fill-mode: forwards;
      pointer-events: auto;
      transition:
        background 0.3s ease,
        color 0.3s ease,
        transform 0.3s ease,
        box-shadow 0.3s ease;
      z-index: 1;
      backdrop-filter: blur(12px);
      opacity: var(--bubble-opacity, 0.95);
      word-break: keep-all;
      letter-spacing: 0.02em;
    }

    .bubble::after {
      content: "";
      position: absolute;
      bottom: -6px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 6px 6px 0 6px;
      border-style: solid;
      border-color: var(--bubble-bg, rgba(248, 250, 252, 0.9)) transparent transparent transparent;
      filter: drop-shadow(0 2px 2px rgba(15,23,42,0.35));
    }

    .bubble:hover {
      background: var(--bubble-hover-bg, rgba(251, 191, 36, 0.98));
      color: #111827;
      transform: scale(1.08) translateY(-6px);
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.8), 0 8px 16px rgba(0, 0, 0, 0.4);
      animation-play-state: paused;
      z-index: 10;
    }

    .bubble:hover::after {
      border-color: var(--bubble-hover-bg, rgba(251, 191, 36, 0.95)) transparent transparent transparent;
    }

    @keyframes fall {
      0% {
        transform: translateY(-120px) translateX(0);
        opacity: 0;
      }
      8% {
        opacity: 1;
      }
      20% {
        transform: translateY(15vh) translateX(0);
      }
      50% {
        transform: translateY(50vh) translateX(8px);
      }
      80% {
        transform: translateY(85vh) translateX(-6px);
      }
      100% {
        transform: translateY(110vh) translateX(0);
        opacity: 0;
      }
    }

    @media (max-width: 480px) {
      .bubble {
        max-width: 85vw;
        font-size: 0.88rem;
        padding: 10px 14px;
      }
      .header-title {
        font-size: 0.9rem;
      }
      .header-sub {
        font-size: 0.68rem;
      }
    }

    /* ====== 모달 팝업 ====== */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 30;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      width: min(480px, 90vw);
      background: #0b1220;
      color: #e5e7eb;
      border-radius: 18px;
      padding: 18px 20px 16px;
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.6);
      position: relative;
    }

    .modal-category-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.7rem;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.8);
      margin-bottom: 6px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .modal-category-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #facc15;
    }

    .modal-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .modal-body {
      font-size: 0.86rem;
      line-height: 1.5;
      color: #cbd5f5;
      margin-bottom: 10px;
    }

    .modal-quote {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 10px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 0.8rem;
      color: #e5e7eb;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 8px;
    }

    .modal-close-btn {
      border: none;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      background: #fbbf24;
      color: #111827;
      font-weight: 600;
      box-shadow: 0 6px 18px rgba(251, 191, 36, 0.45);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .modal-close-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(251, 191, 36, 0.6);
    }

    /* ====== BGM 컨트롤 버튼 ====== */
    .audio-control {
      position: fixed;
      left: 16px;
      bottom: 16px;
      z-index: 25;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(156, 163, 175, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.78rem;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(0,0,0,0.6);
      backdrop-filter: blur(10px);
    }

    .audio-control-icon {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: #22c55e;
    }

    .audio-control.paused .audio-control-icon {
      background: #f97316;
    }

    .audio-hint {
      font-size: 0.7rem;
      opacity: 0.8;
    }

    .audio-control.hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="sky"></div>

  <!-- 상단 타이틀 -->
  <div class="header">
    <div class="header-title">하늘에서 명언이 비처럼 내리면 · 사례관리론 편</div>
    <div class="header-sub">말풍선에 마우스를 올리면 색이 변하고, 클릭하면 그 철학이 펼쳐집니다.</div>
  </div>

  <!-- 배경음악 -->
  <audio id="bgm" src="bgm1.mp3" loop></audio>

  <!-- BGM 컨트롤 버튼 (자동 재생 실패 시에도 사용) -->
  <button id="audioControl" class="audio-control paused">
    <span class="audio-control-icon"></span>
    <span class="audio-label">배경 음악 켜기</span>
    <span class="audio-hint">(한 번만 눌러 주세요)</span>
  </button>

  <!-- 모달 팝업 -->
  <div id="modalOverlay" class="modal-overlay">
    <div class="modal">
      <div class="modal-category-pill">
        <span class="modal-category-dot" id="modalCategoryDot"></span>
        <span id="modalCategoryName"></span>
      </div>
      <div class="modal-title" id="modalTitle"></div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-quote" id="modalQuote"></div>
      <div class="modal-footer">
        <button class="modal-close-btn" id="modalCloseBtn">닫기</button>
      </div>
    </div>
  </div>

  <script>
    // ===== 카테고리 정의 =====
    const categories = {
      core: {
        name: "사례관리의 본질",
        description: "사례관리는 개인의 문제를 다루는 동시에 사회 구조를 비추는 렌즈이며, 발견에서 시작해 존엄의 회복으로 끝나는 실천입니다.",
        bg: "rgba(248, 250, 252, 0.9)",
        hoverBg: "rgba(251, 191, 36, 0.95)",
        dotColor: "#facc15"
      },
      residual_vs_institutional: {
        name: "잔여적 vs 제도적 사례관리",
        description: "잔여적 관점은 개인의 적응을, 제도적 관점은 구조의 변화를 지향하며 '누가'가 아니라 '무엇이' 문제인지 다시 묻습니다.",
        bg: "rgba(219, 234, 254, 0.95)",  // 파랑 느낌
        hoverBg: "rgba(59, 130, 246, 0.95)",
        dotColor: "#60a5fa"
      },
      radical: {
        name: "급진사회복지·해방적 관점",
        description: "급진사회복지는 불평등을 개인의 실패가 아닌 구조의 설계로 보고, 개인해방과 사회변화를 동시에 추구합니다.",
        bg: "rgba(254, 226, 226, 0.95)", // 붉은 톤
        hoverBg: "rgba(248, 113, 113, 0.96)",
        dotColor: "#f97373"
      },
      strengths: {
        name: "강점관점·임파워먼트",
        description: "강점관점과 임파워먼트는 결핍보다 가능성에 주목하며, 클라이언트를 도움받는 대상이 아닌 삶의 주체로 세웁니다.",
        bg: "rgba(220, 252, 231, 0.95)", // 연두
        hoverBg: "rgba(34, 197, 94, 0.96)",
        dotColor: "#22c55e"
      },
      ecology: {
        name: "생태체계·환경 속의 사람",
        description: "생태체계 관점은 개인과 환경의 상호작용을 강조하며, 관계망과 자원의 연결 속에서 문제 해결의 실마리를 찾습니다.",
        bg: "rgba(224, 231, 255, 0.96)", // 보라/파랑
        hoverBg: "rgba(129, 140, 248, 0.97)",
        dotColor: "#818cf8"
      },
      worker_attitude: {
        name: "사례관리자의 태도",
        description: "사례관리자의 태도는 기술 이전에 존중과 비심판성, 그리고 언어의 힘을 의식하는 섬세한 감수성에서 출발합니다.",
        bg: "rgba(241, 245, 249, 0.96)", // 뉴트럴
        hoverBg: "rgba(148, 163, 184, 0.97)",
        dotColor: "#9ca3af"
      },
      assessment: {
        name: "초기단계·사정",
        description: "사정은 결핍을 찾는 목록이 아니라, 클라이언트와 함께 쓰는 삶의 지도이며 ‘무엇이 가능한가’를 묻는 과정입니다.",
        bg: "rgba(254, 249, 195, 0.96)", // 연노랑
        hoverBg: "rgba(250, 204, 21, 0.97)",
        dotColor: "#eab308"
      },
      goal_planning: {
        name: "목표 설정·계획",
        description: "좋은 계획은 SMART 원칙 속에서 꿈과 현실을 조율하며, 장기목표와 단기목표를 통해 길과 방향을 동시에 제시합니다.",
        bg: "rgba(219, 234, 254, 0.96)", // 파랑 톤
        hoverBg: "rgba(37, 99, 235, 0.97)",
        dotColor: "#2563eb"
      },
      execution: {
        name: "실행·옹호·연계",
        description: "연계와 옹호는 단순한 정보 제공이 아니라 관계와 권리의 언어이며, 클라이언트가 스스로 선택할 수 있는 장을 엽니다.",
        bg: "rgba(236, 253, 245, 0.96)", // 초록 파스텔
        hoverBg: "rgba(16, 185, 129, 0.97)",
        dotColor: "#10b981"
      },
      evaluation: {
        name: "모니터링·평가·종결",
        description: "평가와 종결, 사후관리는 개입의 끝이 아니라 변화의 지속성을 확인하고 다음 여정을 준비하는 중요한 단계입니다.",
        bg: "rgba(248, 250, 252, 0.96)",
        hoverBg: "rgba(148, 163, 184, 0.97)",
        dotColor: "#64748b"
      },
      public: {
        name: "공공·통합사례관리",
        description: "공공·통합사례관리는 신청주의를 넘어 먼저 찾아가는 체계로, 행정이 아닌 관계와 책임의 언어로 복지를 조직합니다.",
        bg: "rgba(224, 242, 254, 0.96)",
        hoverBg: "rgba(2, 132, 199, 0.97)",
        dotColor: "#0ea5e9"
      },
      ethics: {
        name: "사회적 고립·윤리·자기결정",
        description: "윤리적 사례관리는 자기결정권을 존중하되 생명 존중을 포기하지 않는 균형 위에서 관계 회복을 모색합니다.",
        bg: "rgba(254, 242, 242, 0.96)",
        hoverBg: "rgba(248, 113, 113, 0.97)",
        dotColor: "#f97373"
      },
      elderly: {
        name: "노인사례관리·선배시민",
        description: "노인은 보호 대상이 아니라 상호돌봄의 주체이자 선배시민으로, 생존을 넘어 삶의 통합과 의미 확장을 지향합니다.",
        bg: "rgba(255, 247, 237, 0.96)",
        hoverBg: "rgba(251, 146, 60, 0.97)",
        dotColor: "#fb923c"
      },
      social_management: {
        name: "사회관리·구조 변화",
        description: "사회관리는 개인 문제를 사회의 언어로 번역하며, 약자를 돕는 수준을 넘어 약자를 만들지 않는 구조를 꿈꿉니다.",
        bg: "rgba(237, 233, 254, 0.96)",
        hoverBg: "rgba(168, 85, 247, 0.97)",
        dotColor: "#a855f7"
      }
    };

    // ===== 명언 배열 (카테고리 포함) =====
    const maxims = [
      // 1. 사례관리의 본질
      { text: "사례관리는 개인의 문제에서 시작해 사회의 구조까지 바라보는 렌즈다.", category: "core" },
      { text: "좋은 사례관리자는 문제를 고치는 사람이 아니라, 가능성을 여는 사람이다.", category: "core" },
      { text: "사례관리의 첫걸음은 발견이고, 마지막은 존엄의 회복이다.", category: "core" },
      { text: "문제의 원인을 어디에 두는가가 당신의 실천을 결정한다.", category: "core" },
      { text: "복지는 시혜가 아니라 권리이며, 사례관리는 그 권리를 되찾는 과정이다.", category: "core" },

      // 2. 잔여적 vs 제도적 사례관리
      { text: "잔여적 관점은 개인을 보지만, 제도적 관점은 세상을 본다.", category: "residual_vs_institutional" },
      { text: "개인을 탓하는 순간, 구조는 계속해서 침묵한다.", category: "residual_vs_institutional" },
      { text: "제도적 사례관리는 ‘적응’을 묻지 않고 ‘변화’를 묻는다.", category: "residual_vs_institutional" },
      { text: "잔여적 사례관리는 생존을 돕고, 제도적 사례관리는 존엄을 되찾는다.", category: "residual_vs_institutional" },
      { text: "누구를 문제로 보느냐가 아니라, 무엇을 문제로 보느냐가 중요하다.", category: "residual_vs_institutional" },

      // 3. 급진사회복지·해방적 관점
      { text: "사회복지는 개인을 고치는 일이 아니라, 억압을 해체하는 일이다.", category: "radical" },
      { text: "불평등은 개인의 실패가 아니라 구조의 설계다.", category: "radical" },
      { text: "억압을 설명하지 못하는 실천은 변화도 만들지 못한다.", category: "radical" },
      { text: "개인해방과 사회변화는 둘이 아니라 하나다.", category: "radical" },
      { text: "사회복지사는 제도의 목소리가 아니라 시민의 목소리로 말해야 한다.", category: "radical" },

      // 4. 강점관점·임파워먼트
      { text: "강점은 발견되는 것이 아니라 함께 찾아가는 것이다.", category: "strengths" },
      { text: "사람은 결핍보다 가능성으로 존재한다.", category: "strengths" },
      { text: "임파워먼트란 ‘힘을 주는 것’이 아니라 ‘힘을 회복시키는 것’이다.", category: "strengths" },
      { text: "클라이언트는 도움받는 사람이 아니라 자신의 삶을 이끄는 주체다.", category: "strengths" },
      { text: "가능성을 본 사람만이 변화를 이끌 수 있다.", category: "strengths" },

      // 5. 생태체계·환경 속의 사람
      { text: "개인은 홀로 존재하지 않고, 환경과 함께 존재한다.", category: "ecology" },
      { text: "문제를 해결하려면 개인이 아니라 관계망을 보라.", category: "ecology" },
      { text: "적합한 환경은 한 사람의 인생을 바꾼다.", category: "ecology" },
      { text: "환경을 바꾸지 않는 개입은 한계에 갇힌다.", category: "ecology" },
      { text: "연결은 곧 자원이며, 자원은 곧 기회다.", category: "ecology" },

      // 6. 사례관리자의 태도
      { text: "존중 없는 개입은 개입이 아니라 침범이다.", category: "worker_attitude" },
      { text: "비판보다 경청이 먼저다.", category: "worker_attitude" },
      { text: "신뢰는 기술이 아니라 태도다.", category: "worker_attitude" },
      { text: "언어는 권력이다. 낙인을 만드는 언어를 버려라.", category: "worker_attitude" },
      { text: "좋은 사례관리자는 ‘답’을 주지 않고 ‘힘’을 준다.", category: "worker_attitude" },

      // 7. 초기단계·사정
      { text: "좋은 사정은 문제를 좁히지 않고 세계를 넓힌다.", category: "assessment" },
      { text: "사정은 진단이 아니라 관계 형성이다.", category: "assessment" },
      { text: "문제로 시작하지 말고, 삶으로 시작하라.", category: "assessment" },
      { text: "사정은 클라이언트와 함께 쓰는 공동문서다.", category: "assessment" },
      { text: "사정의 목적은 ‘무엇이 부족한가’가 아니라 ‘무엇이 가능한가’다.", category: "assessment" },

      // 8. 목표 설정·계획
      { text: "목표가 흐리면 개입도 흐린다.", category: "goal_planning" },
      { text: "SMART 목표는 변화의 좌표다.", category: "goal_planning" },
      { text: "장기목표는 꿈을 만들고, 단기목표는 길을 만든다.", category: "goal_planning" },
      { text: "계획은 영속이 아니라 변화에 따라 수정되는 살아 있는 문서다.", category: "goal_planning" },
      { text: "좋은 계획은 현실을 고려하고 가능성을 존중한다.", category: "goal_planning" },

      // 9. 실행·옹호·연계
      { text: "연계는 정보가 아니라 관계로 이루어진다.", category: "execution" },
      { text: "옹호는 대신 싸우는 것이 아니라 함께 싸우는 것이다.", category: "execution" },
      { text: "권리는 요구가 아니라 선언이다.", category: "execution" },
      { text: "서비스는 주는 것이 아니라 접근을 가능하게 하는 것이다.", category: "execution" },
      { text: "클라이언트가 선택하지 못한다면 그것은 진정한 연계가 아니다.", category: "execution" },

      // 10. 모니터링·평가·종결
      { text: "점검은 감시가 아니라 성장을 돕는 대화다.", category: "evaluation" },
      { text: "평가는 결과가 아니라 과정 전체를 비추는 거울이다.", category: "evaluation" },
      { text: "종결은 끝이 아니라 또 다른 시작이다.", category: "evaluation" },
      { text: "사후관리 없는 종결은 책임 없는 작별이다.", category: "evaluation" },
      { text: "평가는 실천의 품질을, 사후관리는 삶의 품질을 확인한다.", category: "evaluation" },

      // 11. 공공·통합사례관리
      { text: "공공사례관리는 행정이 아니라 관계의 기술이다.", category: "public" },
      { text: "통합이란 단순 연결이 아니라 조화다.", category: "public" },
      { text: "복지의 문을 두드리는 것이 아니라 복지가 먼저 다가가야 한다.", category: "public" },
      { text: "공공은 ‘지원’이 아니라 ‘책임’이다.", category: "public" },
      { text: "복지는 신청이 아니라 발견에서 시작해야 한다.", category: "public" },

      // 12. 사회적 고립·윤리·자기결정
      { text: "자기결정은 존중하되, 생명은 포기하지 않는다.", category: "ethics" },
      { text: "거부의 이면에는 두려움이 있다.", category: "ethics" },
      { text: "설득은 강압이 아니라 관계 회복이다.", category: "ethics" },
      { text: "윤리는 기술보다 깊고, 절차보다 우선이다.", category: "ethics" },
      { text: "어떤 상황에서도 인간의 존엄은 타협할 수 없다.", category: "ethics" },

      // 13. 노인사례관리·선배시민
      { text: "노인은 보호받는 존재가 아니라 함께 살아갈 시민이다.", category: "elderly" },
      { text: "돌봄은 일방이 아니라 상호적이다.", category: "elderly" },
      { text: "노인은 약자가 아니라 경험의 기록이다.", category: "elderly" },
      { text: "나이 듦은 결핍이 아니라 의미의 확장이다.", category: "elderly" },
      { text: "노인사례관리의 목표는 생존이 아니라 통합이다.", category: "elderly" },

      // 14. 사회관리·구조 변화
      { text: "사회관리는 개인의 문제를 사회의 언어로 바꾼다.", category: "social_management" },
      { text: "세상을 읽을 때만 세상을 바꿀 수 있다.", category: "social_management" },
      { text: "변화는 개인에서 시작하지만 구조에서 완성된다.", category: "social_management" },
      { text: "약자를 돕는 일보다 약자를 만들지 않는 사회가 더 중요하다.", category: "social_management" },
      { text: "연대는 선택이 아니라 정의의 방식이다.", category: "social_management" }
    ];

    const MAX_BUBBLES_ON_SCREEN = 10;
    let currentBubbles = 0;

    const modalOverlay = document.getElementById("modalOverlay");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const modalQuote = document.getElementById("modalQuote");
    const modalCategoryName = document.getElementById("modalCategoryName");
    const modalCategoryDot = document.getElementById("modalCategoryDot");
    const modalCloseBtn = document.getElementById("modalCloseBtn");

    function openModal(categoryId, quoteText) {
      const cat = categories[categoryId];
      if (!cat) return;

      modalCategoryName.textContent = cat.name;
      modalTitle.textContent = "이 카테고리의 철학";
      modalBody.textContent = cat.description;
      modalQuote.textContent = "이 말풍선에서 온 문장\n“" + quoteText + "”";
      modalCategoryDot.style.backgroundColor = cat.dotColor || "#facc15";

      modalOverlay.classList.add("active");
    }

    function closeModal() {
      modalOverlay.classList.remove("active");
    }

    modalCloseBtn.addEventListener("click", closeModal);
    modalOverlay.addEventListener("click", (e) => {
      if (e.target === modalOverlay) {
        closeModal();
      }
    });

    function createBubble() {
      if (currentBubbles >= MAX_BUBBLES_ON_SCREEN) return;

      const bubble = document.createElement("div");
      bubble.className = "bubble";

      // 랜덤 명언 선택
      const maxim = maxims[Math.floor(Math.random() * maxims.length)];
      bubble.textContent = maxim.text;

      const cat = categories[maxim.category];

      // 가로 위치
      const left = 8 + Math.random() * 84;
      bubble.style.left = left + "vw";

      // 애니메이션 시간 (더 천천히)
      const duration = 28 + Math.random() * 18;
      bubble.style.animationDuration = duration + "s";

      // 크기 랜덤 (가독성 향상)
      const fontScale = 0.95 + Math.random() * 0.25;
      bubble.style.fontSize = fontScale + "rem";

      // 약간의 투명도 랜덤 (가독성 향상)
      const opacity = 0.88 + Math.random() * 0.12;
      bubble.style.setProperty("--bubble-opacity", opacity.toString());

      // 카테고리 색상 반영 (CSS 변수)
      if (cat) {
        bubble.style.setProperty("--bubble-bg", cat.bg);
        bubble.style.setProperty("--bubble-hover-bg", cat.hoverBg);
      }

      // 클릭 시 모달
      bubble.addEventListener("click", () => {
        openModal(maxim.category, maxim.text);
      });

      document.body.appendChild(bubble);
      currentBubbles++;

      bubble.addEventListener("animationend", () => {
        bubble.remove();
        currentBubbles--;
      });
    }

    // 초기 여러 개 띄우기 (더 적게, 더 천천히)
    for (let i = 0; i < 6; i++) {
      setTimeout(createBubble, i * 1200);
    }

    // 주기적으로 새 말풍선 생성 (간격 늘리기)
    setInterval(() => {
      createBubble();
    }, 2800);

    // ===== 배경음악 컨트롤 =====
    const audio = document.getElementById("bgm");
    const audioControl = document.getElementById("audioControl");
    const audioLabel = audioControl.querySelector(".audio-label");

    function setAudioState(isPlaying) {
      if (isPlaying) {
        audioControl.classList.remove("paused");
        audioLabel.textContent = "배경 음악 일시정지";
      } else {
        audioControl.classList.add("paused");
        audioLabel.textContent = "배경 음악 켜기";
      }
    }

    audioControl.addEventListener("click", async () => {
      try {
        if (audio.paused) {
          await audio.play();
          setAudioState(true);
        } else {
          audio.pause();
          setAudioState(false);
        }
      } catch (err) {
        console.warn("오디오 재생 실패:", err);
      }
    });

    // 페이지 로드 시 자동재생 시도
    window.addEventListener("load", async () => {
      try {
        const playPromise = audio.play();
        if (playPromise !== undefined) {
          await playPromise;
          setAudioState(true);
        }
      } catch (err) {
        // 자동재생이 막힌 경우 – 버튼으로만 재생
        console.log("자동 재생이 제한되어 수동 재생이 필요합니다.");
        setAudioState(false);
      }
    });
  </script>
</body>
</html>

